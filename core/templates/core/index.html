<!DOCTYPE html>
<html lang="en">
    {% load staticfiles %}
    <head>
        <base href="/">
        <meta charset=UTF-8>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Cyfa</title>
        <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/main.css' %}">

    </head>
    <body>
        <div id="wrapper" class="container">
            <app>
                <div class="loading_app"></div>
            </app>
        </div>

        <script src="https://npmcdn.com/web-animations-js@2.2.1"></script>
        <script src="{% static 'js/polyfills.bundle.js' %}"></script>
        <script src="{% static 'js/vendor.bundle.js' %}"></script>
        <script src="{% static 'js/main.bundle.js' %}"></script>
        <script>
            // TODO удалить на production
            function getXmlHttp(){
                var xmlhttp;
                try {
                    xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                } catch (e) {
                    try {
                        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                    } catch (E) {
                        xmlhttp = false;
                    }
                }
                if (!xmlhttp && typeof XMLHttpRequest!='undefined') {
                    xmlhttp = new XMLHttpRequest();
                }
                return xmlhttp;
            }

            function doAjax(data) {
                var ajax = getXmlHttp();
                ajax.open('POST', 'personalarea/personal', true);
                ajax.setRequestHeader("Content-type", "application/json; charset=utf-8");
                ajax.setRequestHeader("X-CSRFToken", 'JD0NfBdsPFFNyv5280O28A477z3koUS2');
                ajax.onreadystatechange = function() {
                    if (ajax.readyState == 4) {
                        if(ajax.status == 200) {
                            console.log( ajax.responseText );
                            // if JSON in responce
                            // console.log( JSON.parse( ajax.responseText ) );
                        } else {
                            alert('Ошибка связи с сервером');
                        }
                    }
                };
                ajax.send( JSON.stringify(data) );
            }
        </script>
    </body>
</html>
